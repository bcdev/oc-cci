<graph id="g">
    <version>1.0</version>
    <node id="binningNode">
      <operator>Binning</operator>
      <sources>
        <sourceProducts>${sourceProducts}</sourceProducts>
      </sources>      
      <parameters>
        <sourceProductPaths>/home/marcoz/Workspace/OC/computing-pml/MERGED_*.dim</sourceProductPaths>
        <startDate>2008-05-02</startDate>
        <endDate>2008-05-03</endDate>
        <useSpatialDataDay>true</useSpatialDataDay>
        <!-- the binner is considerably faster if the whole world is provided here as geometry -->
        <region>POLYGON((-180.0 90.0, 180.0 90.0, 180.0 -90.0, -180.0 -90.0, -180.0 90.0))</region>
        <outputBinnedData>true</outputBinnedData>
        <outputTargetProduct>false</outputTargetProduct>
         
        <binningConfig>
          <numRows>4320</numRows>
          <maskExpr>not(l1_flags.INVALID or l1_flags.COSMETIC or cloud_classif_flags.F_CLOUD or cloud_classif_flags.F_LAND) and ( (bitmask &amp; 31) == 0 ) and (Rw412 &lt;= 0.12) and (sun_zenith_band &lt;= 70.0) </maskExpr>
          <variables>
            <variable>
              <name>Rrs412</name>
              <expr>Rw412/PI</expr>
          </variable>
          <variable>
            <name>Rrs443</name>
            <expr>Rw443/PI</expr>
          </variable>
          <variable>
            <name>Rrs490</name>
            <expr>Rw490/PI</expr>
          </variable>
          <variable>
            <name>Rrs510</name>
            <expr>Rw510/PI</expr>
          </variable>
          <variable>
            <name>Rrs560</name>
            <expr>Rw560/PI</expr>
          </variable>
          <variable>
            <name>Rrs620</name>
            <expr>Rw620/PI</expr>
          </variable>
          <variable>
            <name>Rrs665</name>
            <expr>Rw665/PI</expr>
          </variable>
         </variables>
         <aggregators>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs412</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs443</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs490</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs510</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs560</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs620</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
           <aggregatorConfig>
             <type>AVG</type>
             <varName>Rrs665</varName>
             <outputSums>true</outputSums>
           </aggregatorConfig>
         </aggregators>
         <postProcessor>
           <type>Selection</type>
           <varNames>Rrs412_sum,Rrs412_sum_sq,Rrs443_sum,Rrs443_sum_sq,Rrs490_sum,Rrs490_sum_sq,Rrs510_sum,Rrs510_sum_sq,Rrs560_sum,Rrs560_sum_sq,Rrs620_sum,Rrs620_sum_sq,Rrs665_sum,Rrs665_sum_sq,weights=Rrs665_weights</varNames>
         </postProcessor>
         <minDataHour>10</minDataHour> <!-- constant for MERIS data -->
         <periodDuration>1</periodDuration> <!-- means: base period of data day is 1 day -->
       </binningConfig>
       <formatterConfig>
         <outputType>Product</outputType>
         <outputFormat>BEAM-DIMAP</outputFormat>
         <outputFile>/home/marcoz/Workspace/OC/computing-pml/oc-binnig-meris_nan_masking-fast-selected.dim</outputFile>
       </formatterConfig>
     </parameters>
   </node> 
</graph>